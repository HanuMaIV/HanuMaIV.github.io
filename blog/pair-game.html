<!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="utf-8">
      <link rel="stylesheet" href="../css/reset.css" media="screen">
      <link rel="stylesheet" href="../css/default.css" media="screen">
      <link rel="stylesheet" href="../css/blog-stylesheet.css" media="screen">
      <link rel="stylesheet" href="../css/pairingGame.css" media="screen">
      <link rel="stylesheet" href="../fonts/font-awesome/css/font-awesome.min.css">
      <meta name="viewport" content="initial-scale=1">
      <title>DBC Pairing Game | Brendan Miranda Software Writer</title>
    </head>
    <body id="blogPost">
      <header>
        <a id="top"></a>
        <a href="../index.html">
          <div id="logo">
            <h2>Brendan Miranda</h2>
            <span>- Software Writer -</span>
          </div>
        </a>
        <ul class="navLinks">
          <li class="navIcon">
            <a href="../index.html">
              <i class="fa fa-home fa-2x"></i>
              <br>
              <span class="navText">Home</span>
            </a>
          </li>
          <li class="navIcon">
            <a href="../about.html">
              <i class="fa fa-mars fa-2x"></i>
              <br>
              <span class="navText">About</span>
            </a>
          </li>
          <li class="navIcon activeLink">
            <a href="../blog.html">
              <i class="fa fa-newspaper-o fa-2x"></i>
              <br>
              <span class="navText">Blog</span>
            </a>
          </li>
          <li class="navIcon">
            <a href="../portfolio.html">
              <i class="fa fa-code fa-2x"></i>
              <br>
              <span class="navText">Work</span>
            </a>
          </li>
          <li class="navIcon">
            <a href="../contact.html">
              <i class="fa fa-bullhorn fa-2x"></i>
              <br>
              <span class="navText">Contact</span>
            </a>
          </li>
        </ul>
      </header>

      <section>
        <h1>DBC Pairing Game</h1>
        <div class="blogEntry">
           <h5>Brendan is destined to pair with one of these cohorts.<h5>
            <ul>
              <li>Move the arrow keys to move Brendan to a potential pairing partner.</li>
              <li>Press "p" when near a pairing partner to see if they want to pair with you.</li>
            </ul>
            <h5>Good luck, remember... homework is almost due.</h5>
    <div id="room">
      <div class="character" id="playerDiv"><img class="characterPhoto" src="../images/brendan.jpeg"><h6>Brendan</h6></div>
      <div class="character" id="geovannaDiv"><img class="characterPhoto" src="../images/geovanna.jpeg"><h6>Geovanna</h6></div>
      <div class="character" id="aceDiv"><img class="characterPhoto" src="../images/ace.jpeg"><h6>Ace</h6></div>
      <div class="character" id="marcoDiv"><img class="characterPhoto" src="../images/marco.jpeg"><h6>Marco</h6></div>
    </div>
    <div id="winner">
      <h1>You WIN!!!!</h1>
      <p>Press N to Play Again</p>
    </div>


    <script>
    var backgroundMusic = new Audio('../sounds/backgroundMusic.mp3');
      backgroundMusic.addEventListener('ended', function() {
      this.currentTime = 0;
      this.play();
      }, false);
    backgroundMusic.play();
    var move = new Audio('../sounds/move.mp3');
    var winSound = new Audio('../sounds/winner.mp3');
    var cheer = new Audio('../sounds/cheer.mp3');
    var loser = new Audio('../sounds/loser.mp3');
    var error = new Audio('../sounds/invalidMove.mp3');
    var playerImg = document.getElementById("player");
    var map = document.getElementById("room");


    var brendan = {name: "Brendan",
                   position: {x: 10, y: 181}
                  };

    var geo = {name: "Geovanna",
              position: {x: 530, y: 5}
              };

    var ace = {name: "Ace",
               position: {x: 530, y: 181}
              };

    var marco = {name: "Marco",
               position: {x: 530, y: 358}
              };

    var friends = [geo, ace, marco];


    var closestPlayerValue = null;

    function closestPlayer() {
      if ((playerLeft == 430) && (playerTop == 4)){
        closestPlayerValue = geo.name;
      } else if ((playerLeft == 430) && (playerTop == 181)) {
        closestPlayerValue = ace.name;
      } else if ((playerLeft == 430) && (playerTop == 358)) {
        closestPlayerValue = marco.name;
      } else {
        closestPlayerValue = null;
      }
    }

    function randomPair() {
      return Math.floor((Math.random() * 3) + 1) - 1;
   };

   var pairMatch = friends[randomPair()].name;




    var playerLeft = brendan.position.x;
    var playerTop = brendan.position.y;

    playerDiv.style.left = playerLeft + "px";
    playerDiv.style.top = playerTop + "px";
    geovannaDiv.style.left = geo.position.x + "px";
    geovannaDiv.style.top = geo.position.y + "px";
    aceDiv.style.left = ace.position.x + "px";
    aceDiv.style.top = ace.position.y + "px";
    marcoDiv.style.left = marco.position.x + "px";
    marcoDiv.style.top = marco.position.y + "px";


      function anim(e){
        if(e.keyCode == 39) {
          if (playerLeft + 140 > 500) {
            error.play();
          } else {
            playerLeft += 140;
            playerDiv.style.left = playerLeft + "px";
            move.play();
            closestPlayer();
            console.log(playerLeft);
            console.log(closestPlayerValue);
          }
        }
        if(e.keyCode == 37) {
          if (playerLeft - 0 < 100) {
            error.play();
          } else {
            playerLeft -= 140;
            playerDiv.style.left = playerLeft + "px";
            move.play();
            closestPlayer();
            console.log(playerLeft);
            console.log(closestPlayerValue);
          }
        }
        if(e.keyCode == 40) {
          if (playerTop + 177 > 400) {
            error.play();
          } else {
            playerTop += 177;
            playerDiv.style.top = playerTop + "px";
            move.play();
            closestPlayer();
            console.log(playerTop);
            console.log(closestPlayerValue);
          }
        }
        if(e.keyCode == 38) {
          if (playerTop - 177 < 0) {
            error.play();
          } else {
            playerTop -= 177;
            playerDiv.style.top = playerTop + "px";
            move.play();
            closestPlayer();
            console.log(playerTop);
            console.log(closestPlayerValue);
          }
        }
        if(e.keyCode == 80) {
          if ((pairMatch == closestPlayerValue) && (closestPlayerValue =! null)){
            winSound.play();
            room.style.display = "none";
            winner.style.display = "inline-block";
            cheer.play();
          } else {
            loser.play();
          }

        }
        if(e.keyCode == 78) {
          location.reload();
        }

      }



    document.onkeydown = anim;


    </script>
        </div>

      </section>

      <footer>
        <ul class="navLinks">
            <li class="navIcon">
              <a href="https://github.com/HanuMaIV"  target="new">
                <i class="fa fa-github fa-2x"></i>
                <br>
                <span class="navText">GitHub</span>
              </a>
            </li>
            <li class="navIcon">
              <a href="https://twitter.com/musictrainer" target="new">
                <i class="fa fa-twitter fa-2x"></i>
                <br>
                <span class="navText">Twitter</span>
              </a>
            </li>
            <li class="navIcon">
              <a href="https://www.facebook.com/MusicTrainer" target="new">
                <i class="fa fa-facebook fa-2x"></i>
                <br>
                <span class="navText">Facebook</span>
              </a>
            </li>
            <li class="navIcon">
              <a href="http://www.linkedin.com/in/brendanmiranda" target="new">
                <i class="fa fa-linkedin fa-2x"></i>
                <br>
                <span class="navText">LinkedIn</span>
              </a>
            </li>
        </ul>
      <a href="#top">
        <div id="footer-copyright">
          <p id="footerText"></p>
        </div>
      </a>
    </footer>
  </body>
</html>